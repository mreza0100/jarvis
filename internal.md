# How does Jarvis works!

## Diagram

```
┌──────────────────┐   ┌──────────────────────┐       ┌──────────────────┐     ┌───────────────────┐
│  .jarvisrc.json  │   │File Descriptors (FDs)│       │    OpenAI API    │     │ PostgresQL Server │
│                  │   │Stdin                 │       │                  │     │                   │
│                  │   │Stdout                │       │                  │     │                   │
│                  ◄─┐ │Stderr                ◄─┐     │                  ◄─┐   │                   ◄──────────┐
└──────────────────┘ │ └──────────────────────┘ │     └──────────────────┘ │   └───────────────────┘          │
                     │                          │                          │                                  │
                     └────┐                     │                          └────────────────────┐             │
                          │                     │                                               │             │
                          │                     └────────────────────────────────────────────┐  │             │
                          │                                                                  │  │             │
                          │                                                                  │  │             │
                          ├──────────────────────┐                  ┌──────────────────────┐ │  │             │
                          │    Config Provider   │                  │   Terminal Adapter   ├─┘  │             │
                          │                      │                  │                      │    │             │
                          │                      │                  │                      │    │             │
                          │                      ◄─────────┬────────►Renders Markdown      │    │             │
                          │Config Control        │         │        │Read                  │    │             │
                          │GPT Config            │         │        │Write                 │    │             │
                          │History Config        │         │        │Log controll          │    │             │
                          └──────────────────────┘         │        └──────────────────────┘    │             │
                                                           │                                    │             │
                          ┌──────────────────────┐         │        ┌──────────────────────┬────┘             │
                          │   History Adapter    │         │        │    Chat Adapter      │                  │
                          │                      │         │        │                      │                  │
                          │ Dump history on disk │         │        │  Interact with API   │                  │
                          │                      ◄─────────┼────────►                      │                  │
                          │                      │         │        │                      │                  │
                          │                      │         │        │                      │                  │
                          │                      │         │        │                      │                  │
                          └──────────────────────┘         │        └──────────────────────┘                  │
                                                         ┌─┴─┐                                                │
                                                         │   │                                                │
        ┌───────────────────────┐                        │   │                        ┌───────────────────────┤
        │    OS Script Runner   │                        │   │                        │ Postgres Query Runner │
        │                       │                        │   │                        │                       │
        │        Adapter        │                        │   │                        │       Adapter         │
        │                       │                        │   │                        │                       │
        │                       ◄──┐                     │   │                     ┌──►                       │
        │                       │  │                     │   │                     │  │                       │
        │                       │  │                     │   │                     │  │                       │
        │                       │  │                     │   │                     │  │                       │
        └───────────────────────┘  ├─────────────────────┤   ├─────────────────────┤  └───────────────────────┘
                                   │         OS          │   │      Postgres       │
                                   │                     │   │                     │
                                   │   Service Domain    │   │    Service Domain   │
                                   │                     │   │                     │
                                   │                     │   │                     │
                                   │                     │   │                     │
                                   │                     │   │                     │
                                   │                     │   │                     │
                                   └──────────▲──────────┘   └─────────▲───────────┘
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                              │                        │
                                    ┌─────────┴───────┐       ┌────────┴────────┐
                                    │                 │       │                 │
                                    │       OS        │       │    Postgres     │
                                    │   CLI Handler   │       │   CLI Handler   │
                                    │                 │       │                 │
                                    │                 │       │                 │
                                    └─────────────────┘       └─────────────────┘
```
